---
phase: 04-claude-code-plugin-configuration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude-plugin/marketplace.json
autonomous: true

must_haves:
  truths:
    - "marketplace.json version matches Cargo.toml version"
    - "marketplace.json has valid schema reference"
  artifacts:
    - path: ".claude-plugin/marketplace.json"
      provides: "Marketplace distribution metadata"
      contains: "0.2.11"
  key_links:
    - from: ".claude-plugin/marketplace.json"
      to: "Cargo.toml"
      via: "version field"
      pattern: "0\\.2\\.11"
---

<objective>
Verify and update marketplace.json for plugin distribution consistency.

Purpose: Ensure marketplace.json has correct version and complete metadata for GitHub-based plugin distribution.

Output: Updated marketplace.json ready for marketplace distribution.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-claude-code-plugin-configuration/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify and update marketplace.json</name>
  <files>.claude-plugin/marketplace.json</files>
  <action>
Review current marketplace.json and ensure it matches the latest plugin configuration patterns.

Current marketplace.json is mostly complete. Verify:
1. Version matches Cargo.toml (0.2.11) - already correct
2. Schema reference is present - already has it
3. Plugin entry has category - already has "productivity"

If the file needs any updates for consistency, make them. The current file looks correct:
```json
{
  "$schema": "https://anthropic.com/claude-code/marketplace.schema.json",
  "name": "totui-mcp",
  "version": "0.2.11",
  "description": "Terminal todo list manager with MCP server integration",
  "owner": {
    "name": "to-tui"
  },
  "plugins": [
    {
      "name": "totui-mcp",
      "description": "MCP server for to-tui - terminal todo list manager with daily todos, hierarchical tasks, and rollover support",
      "version": "0.2.11",
      "author": {
        "name": "to-tui"
      },
      "source": "./",
      "category": "productivity"
    }
  ]
}
```

This file may not need changes. Read it and confirm it matches the above structure. If it differs, update it.
  </action>
  <verify>marketplace.json exists, has version 0.2.11, has valid schema reference, plugin entry has category</verify>
  <done>marketplace.json validated or updated for distribution readiness</done>
</task>

<task type="auto">
  <name>Task 2: Verify install-binary.sh is functional</name>
  <files>scripts/install-binary.sh</files>
  <action>
Read scripts/install-binary.sh and verify it:
1. Uses correct GitHub repo path (grimurjonsson/to-tui)
2. Creates correct target/release directory structure
3. Downloads to correct binary name (totui-mcp)
4. Has error handling for missing releases

The script should already be correct. This is a verification task - read and confirm. No changes expected unless issues found.
  </action>
  <verify>scripts/install-binary.sh exists, uses correct repo "grimurjonsson/to-tui", downloads to "target/release/totui-mcp"</verify>
  <done>Binary installation script verified functional</done>
</task>

</tasks>

<verification>
1. marketplace.json has schema, version 0.2.11, and plugins array
2. scripts/install-binary.sh downloads from correct GitHub releases URL
3. Binary install path matches .mcp.json expectation (target/release/totui-mcp)
</verification>

<success_criteria>
- marketplace.json validated with correct version and schema
- install-binary.sh verified to download to correct location
- Configuration files consistent with each other (version, paths)
</success_criteria>

<output>
After completion, create `.planning/phases/04-claude-code-plugin-configuration/04-02-SUMMARY.md`
</output>
