# Phase 15: Migration - Context

**Gathered:** 2026-01-26
**Status:** Ready for planning

<domain>
## Phase Boundary

Extract the existing Jira generator from to-tui binary and publish it as the first external plugin in grimurjonsson/to-tui-plugins. Remove built-in Jira code. P key opens a new plugins modal with installed plugins and marketplace browser.

</domain>

<decisions>
## Implementation Decisions

### Plugin repository structure
- Flat structure: each plugin in root directory (jira-claude/, etc.)
- Self-contained plugins: each has its own README.md with install instructions, config examples, usage
- Plugin named "jira-claude" (indicates Claude-based generation)
- MIT license for the registry repository
- Per-plugin independent releases using git tags (jira-claude-v1.0.0 format)
- GitHub Actions CI for cross-platform builds (Linux, macOS, Windows)
- Git tags trigger release builds
- marketplace.toml auto-generated by CI after plugin releases
- marketplace.toml contains basic data only: name, version, description, download URLs
- Download URLs for all three platforms in manifest
- README auto-generated from marketplace.toml listing available plugins
- No contributing guide initially (focus on Jira plugin first)

### P-key plugins modal
- Tab-based modal with [Installed] and [Marketplace] tabs
- Tab/Shift+Tab navigates between tabs
- Installed tab: select plugin to invoke its primary action
- Visual status indicators: green = active, yellow = disabled, red = error
- Marketplace tab: select plugin to view comprehensive details
- Details view shows: name, version, description, author, permissions, keybindings, config options
- Install button in details view
- Installing auto-enables the plugin

### Registry publication
- Initial jira-claude version: v0.1.0
- Minimum to-tui version compatibility (no upper bound)
- Per-plugin CHANGELOG.md in each plugin directory
- No checksum verification (trust HTTPS)
- Tests required before release (cargo test gate)
- marketplace.toml update is part of release workflow

### Breaking change handling
- P shows empty modal if no plugins installed (no special migration prompt)
- No config migration — users configure jira-claude plugin fresh
- Continue v1.x versioning (plugin system is additive, not breaking)
- Update documentation: P opens plugins modal (not Jira generator)

### Claude's Discretion
- CI workflow implementation details
- Exact modal layout and styling
- Release workflow error handling
- marketplace.toml exact TOML schema

</decisions>

<specifics>
## Specific Ideas

- marketplace.toml lives in to-tui-plugins repo, to-tui fetches it
- grimurjonsson/to-tui-plugins is pre-registered as default marketplace
- to-tui stores registered marketplaces (can add custom ones)

</specifics>

<deferred>
## Deferred Ideas

- Contributing guide for external plugin authors — add when others want to contribute
- Plugin sub-menu (Configure, Disable, Uninstall) in Installed tab — consider for future
- Scheduled marketplace.toml regeneration — current approach is release-triggered

</deferred>

---

*Phase: 15-migration*
*Context gathered: 2026-01-26*
